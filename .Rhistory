TRUE ~ location_of_participation))
demo_dat %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>%  count(location_of_participation, location_of_participation_recode) %>%  View()
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation))
demo_dat %>%  count(location_of_participation, location_of_participation_recode) %>%  View()
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", "")) %>%
case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", ""))
demo_dat <- demo_dat %>%
mutate(case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", ""))
# remove instances where " ca" is at the end of the string
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation))
# remove special characters like ":" before laguna beach. Combine and correct misspellings. Leaving combined cities or ones that seem similar (i.e. big bear and big bear valley) alone for now, also not verifying that all of these are in fact cities (I only verified for ones I suspected having misspellings). Combining all unknown's into one (data not collected, refused, doesn't know etc).
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", ""))
# remove instances where " ca" is at the end of the string
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation_recode))
# remove special characters like ":" before laguna beach. Combine and correct misspellings. Leaving combined cities or ones that seem similar (i.e. big bear and big bear valley) alone for now, also not verifying that all of these are in fact cities (I only verified for ones I suspected having misspellings). Combining all unknown's into one (data not collected, refused, doesn't know etc).
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", "")) %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation_recode)) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, "'", "")) %>%
mutate(location_of_participation_recode = str_replace(location_of_participation, ", ca|,ca|california", ""))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca|california") ~ str_replace_all(location_of_participation, " ca|, ca|california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca|california") ~ str_replace_all(location_of_participation, " ca|, ca| california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation_recode))
demo_dat %>%
count(location_of_participation, location_of_participation_recode)
?str_replace_all
fruits <- c("one apple", "two pears", "three bananas")
str_replace(fruits, "[aeiou]", "-")
str_replace_all(fruits, "[aeiou]", "-")
str_replace_all(fruits, "[aeiou]", toupper)
str_replace_all(fruits, "b", NA_character_)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca", ""),
str_ends(location_of_participation, "california") ~ str_replace_all(location_of_participation, " california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca|, ca", ""),
str_ends(location_of_participation, "california") ~ str_replace_all(location_of_participation, " california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca|, ca", ""),
str_ends(location_of_participation, "california") ~ str_replace_all(location_of_participation, " california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>% filter(str_detect(location_of_participation, "1|2|3|4|5|6|7|8|9|0")) %>% count(location_of_participation, location_of_participation_recode) %>% View()
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
# the following had zipcodes at the end of the string
str_detect(location_of_participation, "indio") ~ "indio",
str_detect(location_of_participation, "inglewood") ~ "inglewood",
str_detect(location_of_participation, "marysvil") ~ "marysville",
str_detect(location_of_participation, "turlock") ~ "turlock",
str_detect(location_of_participation, "yuba") ~ "yuba city",
str_detect(location_of_participation, "yucaipa") ~ "yucaipa",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation_recode))
demo_dat %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>% count(location_of_participation, location_of_participation_recode) %>% View()
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca|, ca", ""),
str_ends(location_of_participation, " california") ~ str_replace_all(location_of_participation, " california", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, "ca") ~ str_replace_all(location_of_participation, " ca|, ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, " ca|, ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>% count(location_of_participation_recode) %>%  View()
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, " ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, ", ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, "ca|, ca", ""),
TRUE ~ location_of_participation_recode))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
# the following had zipcodes at the end of the string
str_detect(location_of_participation, "indio") ~ "indio",
str_detect(location_of_participation, "inglewood") ~ "inglewood",
str_detect(location_of_participation, "marysvil") ~ "marysville",
str_detect(location_of_participation, "turlock") ~ "turlock",
str_detect(location_of_participation, "yuba") ~ "yuba city",
str_detect(location_of_participation, "yucaipa") ~ "yucaipa",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation_recode))
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, "ca|, ca", ""),
str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
# the following had zipcodes at the end of the string
str_detect(location_of_participation, "indio") ~ "indio",
str_detect(location_of_participation, "inglewood") ~ "inglewood",
str_detect(location_of_participation, "marysvil") ~ "marysville",
str_detect(location_of_participation, "turlock") ~ "turlock",
str_detect(location_of_participation, "yuba") ~ "yuba city",
str_detect(location_of_participation, "yucaipa") ~ "yucaipa",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation))
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
demo_dat <- demo_dat %>%
mutate(location_of_participation_recode = case_when(str_ends(location_of_participation, " ca") ~ str_replace_all(location_of_participation, "ca|, ca", ""),
str_ends(location_of_participation, "california") ~ str_replace_all(location_of_participation, " california", ""),
str_detect(location_of_participation, ":") ~ "laguna beach",
str_detect(location_of_participation, "bakersf|bakerf") ~ "bakersfield",
str_detect(location_of_participation, "bartso") ~ "barstow",
str_detect(location_of_participation, "beam|beum") ~ "beaumont",
str_detect(location_of_participation, "cal city") ~ "california city",
str_detect(location_of_participation, "cailm") ~ "calimesa",
str_detect(location_of_participation, "catherd") ~ "cathedral city",
str_detect(location_of_participation, "cathey") ~ "catheys valley",
str_detect(location_of_participation, "clairem") ~ "claremont",
str_detect(location_of_participation, "cochell") ~ "coachella",
str_detect(location_of_participation, "desesrt|desrt") ~ "desert hot springs",
str_detect(location_of_participation, "frasier") ~ "frazier park",
str_detect(location_of_participation, "idlewild") ~ "idyllwild",
str_detect(location_of_participation, "jurupa") ~"jurupa valley",
str_detect(location_of_participation, "mills hospital in b") ~ "burlingame",
str_detect(location_of_participation, "mountainview") ~"mountain view",
str_detect(location_of_participation, "murreta") ~ "murrieta",
str_detect(location_of_participation, "pachecc") ~ "pacheco",
str_detect(location_of_participation, "palms sp|palm spr|palm dpr") ~ "palm springs",
str_detect(location_of_participation, "ranch mira") ~ "rancho mirage",
str_detect(location_of_participation, "rancho cucam") ~ "rancho cucamonga",
str_detect(location_of_participation, "richomo") ~ "richmond",
str_detect(location_of_participation, "ridegc") ~ "ridgecrest",
str_detect(location_of_participation, "riverisd|riveside") ~ "riverside",
str_detect(location_of_participation, "rough &|rough and re") ~ "rough and ready",
str_detect(location_of_participation, "sacrment|sacarament|sarcamen") ~ "sacramento",
str_detect(location_of_participation, "san berna|san bera|san bernr") ~ "san bernardino",
str_detect(location_of_participation, "san dieg") ~ "san diego",
str_detect(location_of_participation, "san fra|sf") ~ "san francisco",
str_detect(location_of_participation, "sugar l") ~ "sugarloaf",
str_detect(location_of_participation, "tehac") ~ "tehachapi",
str_detect(location_of_participation, "twenty|29 pal") ~ "twentynine palms",
str_detect(location_of_participation, "vict") ~ "victorville",
str_detect(location_of_participation, "weaverv") ~ "weaverville",
str_detect(location_of_participation, "wildom") ~ "wildomar",
str_detect(location_of_participation, "yucca") ~ "yucca valley",
# the following had zipcodes at the end of the string
str_detect(location_of_participation, "indio") ~ "indio",
str_detect(location_of_participation, "inglewood") ~ "inglewood",
str_detect(location_of_participation, "marysvil") ~ "marysville",
str_detect(location_of_participation, "turlock") ~ "turlock",
str_detect(location_of_participation, "yuba") ~ "yuba city",
str_detect(location_of_participation, "yucaipa") ~ "yucaipa",
str_detect(location_of_participation, "data not col|doesn't know|refused|missing|unk") ~ "unknown",
is.na(location_of_participation) ~ "unknown",
TRUE ~ location_of_participation))
demo_dat %>%
count(location_of_participation, location_of_participation_recode)
demo_dat %>%
filter(str_detect(location_of_participation, ", ca| ca|,|california")) %>%
count(location_of_participation, location_of_participation_recode)
statewide_survey_processed_2023_06_26_18_51_22 <- readRDS("C:/Users/rsakoda/Desktop/bhhi_projects/caspeh/practice/statewide_survey_processed_2023_06_26_18_51_22.rds")
source("R/helpers.R")
