list.files("Y:\Home Safe Eval 23_25\June 2023 Exploratory Data\Home Safe Data-FY 22-23 Q3")
library(dplyr)
library(janitor)
library(stringr)
full_dat <- readxl::X7_12_23_Home_Safe_Data_FY_22_23_Q3 <- read_excel("V:/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
full_dat <- readxl::read_excel("V:/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
renv::init()
full_dat %>%
glimpse()
full_dat %>%
dim()
full_dat %>%
glimpse()
remotes::install_github("ucsf-bhhi/SummaryTable")
install.packages("remotes")
remotes::install_github("ucsf-bhhi/SummaryTable")
library(SummaryTable)
full_dat %>%
select(-ID) %>%
var_summarise()
install.packages("kableExtra")
library(kableExtra)
names(full_dat)
install.packages("janitor")
library(dplyr)
library(janitor)
library(stringr)
library(SummaryTable)
library(kableExtra)
full_dat <- readxl::read_excel("V:/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
full_dat <- readxl::read_excel("V:/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
head(full_dat)
names(full_dat)
full_dat <- full_dat %>%
janitor::clean_names()
names(full_dat)
int_dat <- full_dat %>%
select(id,
starts_with("intervention"))
head(int_dat)
int_dat %>% names()
int_dat_long <- int_dat %>%
pivot_longer(matches("type"))
int_dat_long <- int_dat %>%
tidyr::pivot_longer(matches("type"))
View(int_dat_long)
View(full_dat)
View(full_dat)
library(dplyr)
library(janitor)
library(stringr)
library(SummaryTable)
full_dat <- readxl::read_excel("V:/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
<<<<<<< HEAD
renv::snapshot()
setwd("Y:/")
Sys.getenv("mkushel_shared_drive")
install.packages(c("dplyr","janitor", "kableExtra", "readxl", "rmarkdown", "stringr","tidyr"))
install.packages("remotes")
remotes::install_github("ucsf-bhhi/bhhitools")
bhhi_shared_drive("Home_Safe")
library(bhhitools)
bhhi_shared_drive("Home_Safe")
list.files(bhhi_shared_drive("Home_Safe"))
list.files("Z:\")
list.files("Z:\\")
list.files("Z:\\Research")
list.files("Z:\\Research\Home Safe")
list.files("Z:\\Research/Home Safe")
bhhi_shared_drive("Home_Safe")
list.files("Z:\\Research\\BHHI/Home_Safe")
list.files("Z:\\Research//BHHI/Home_Safe")
install.packages("credentials")
usethis::use_git_config(user.name = "gsakoda", user.email = "ginasakoda@gmail.com")
install.packages("usethis")
install.packages("usethis")
usethis::use_git_config(user.name = "gsakoda", user.email = "ginasakoda@gmail.com")
usethis::create_github_token()
credentials::set_github_pat()
remotes::install_github("ucsf-bhhi/SummaryTable")
renv::snapshot()
renv::status()
list.files("Y:\\")
path.file("Y:\\Home Safe Eval 23_25")
file.path("Y:\\Home Safe Eval 23_25")
bhhi_shared_drive("Home_Safe")
list.files("Z:\\Research\\BHHI/Home_Safe")
list.files("Z:\\Research/BHHI/Home_Safe")
list.files("Z://Research/BHHI/Home_Safe")
list.files("Z://Research//BHHI/Home_Safe")
bhhi_shared_drive("Home_Safe")
=======
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/CVP/Research/BHHI/statewide_survey_processed_data")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/")
list.files("//sfgh02.som.ucsf.edu/shared$/")
to_check = list.files("//sfgh02.som.ucsf.edu/shared$/vol02/")
for (i in to_check){
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/", i, sep = ""))
}
to_check
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/")
list.files("//sfgh02.som.ucsf.edu/shared$/")
to_check <- list.files("//sfgh02.som.ucsf.edu/shared$/")
for (i in to_check){
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/", i, sep = ""))
}
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
vol01, sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol01", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol02", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol01", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol03", sep = ""))
to_check
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol04", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol05", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/vol02/",
"vol06", sep = ""))
list.files("//sfgh02.som.ucsf.edu/shared$/")
list.files("//sfgh02.som.ucsf.edu/")
list.files("//sfgh02.som.ucsf.edu/shared$/")
list.files(vo102"//sfgh02.som.ucsf.edu/shared$/")
list.files(vo102"//sfgh02.som.ucsf.edu/shared$/vo102")
list.files("//sfgh02.som.ucsf.edu/shared$/vo102")
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol01", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol03", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol04", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol05", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02/CVP", sep = ""))
list.files(paste("//sfgh02.som.ucsf.edu/shared$/",
"vol02/CVP/Research", sep = ""))
list.files("\\ars-data-01.sde.net.ucsf.edu")
list.files("\\ars-data-01.sde.net.ucsf.edu\MyResearchShared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/Shared_Priority")
list.files("\\ars-data-01.sde.net.ucsf.edu\MyResearchShared\")
list.files("\\ars-data-01.sde.net.ucsf.edu/MyResearchShared/")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/")
list.files("//sfgh01.som.ucsf.edu/shared$/")
list.files("//sfgh02.som.ucsf.edu/shared$/")
list.files("//sfgh04.som.ucsf.edu/shared$/")
list.files("//sfgh05.som.ucsf.edu/shared$/")
list.files("//sfgh04.som.ucsf.edu/shared$/")
list.files("//sfgh04.som.ucsf.edu/shared$/")
list.files("//sfgh04.som.ucsf.edu/shared$/vol102")
list.files("//sfgh02.som.ucsf.edu/shared$/")
list.files("//sfgh02.som.ucsf.edu/shared$/vol102")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/CVP")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/CVP/Research")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/CVP/Research/Aging Homeless")
200/.5
file.path("\\ars-data-01.sde.net.ucsf.edu\MyResearchShared\mkushel_shared")
file.path("\\ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
list.files("\\ars-data-01.sde.net.ucsf.edu\MyResearchShared\mkushel_shared")
list.files("\\ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
list.files("\\ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared/ome Safe Eval 23_25")
list.files("\\ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared/Home Safe Eval 23_25")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared/Home Safe Eval 23_25")
remotes::install_github("ucsf-bhhi/bhhitools")
library(bhhitools)
bhhi_shared_drive("Home_Safe")
remove.packages("SummaryTable")
remotes::install_github("ucsf-bhhi/SummaryTable")
full_dat <- readxl::read_excel("Home_Safe/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
Home_Safe
bhhi_shared_drive("Home_Safe")
list.files("//sfgh02.som.ucsf.edu/shared$/vol02/CVP/Research/BHHI/Home_Safe")
list.files("\\ars-data-01.sde.net.ucsf.edu\MyResearchShared\mkushel_shared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
bhhi_shared_drive("Home_Safe")
list.files(bhhi_shared_drive("Home_Safe"))
bhhi_shared_drive(envvar_name = "Home_Safe")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared/Home Safe Eval 23_2")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared")
list.files("//ars-data-01.sde.net.ucsf.edu/MyResearchShared/mkushel_shared/Home Safe Eval 23_25")
Sys.getenv("MKUSHEL_SHARED")
Sys.getenv("MKUSHEL_SHARED")
Sys.getenv("MKUSHEL_SHARED")
<<<<<<< HEAD
Sys.getenv("MKUSHEL_SHARED")
list.files(Sys.getenv("MKUSHEL_SHARED"))
# Read in data
full_dat <- readxl::read_excel("MKUSHEL_SHARED/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
full_dat <- readxl::read_excel("MKUSHEL_SHARED/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx",
sheet = "Full Dataset")
list.files("MKUSHEL_SHARED/Home Safe Eval 23_25/")
list.files("MKUSHEL_SHARED")
list.files(Sys.getenv("MKUSHEL_SHARED"))
Sys.getenv("MKUSHEL_SHARED")
list.files("MKUSHEL_SHARED")
m_path <- Sys.getenv("MKUSHEL_SHARED")
full_dat <- readxl::read_excel(paste(m_path, "/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx", sep = ""),
sheet = "Full Dataset")
head(full_dat)
renv::status()
Y
renv::snapshot()
source("R/helpers.R")
head(int_dat)
int_dat %>%
glimpse()
missing_count <- function(df, var){
var_quo <- sym(var_quo)
df %>%
filer(is.na(!!var_quo))
}
names(int_dat)
missing_count(df = int_dat, var = "intervention_6_amount")
missing_count <- function(df, var){
var_quo <- sym(var)
df %>%
filer(is.na(!!var_quo))
}
missing_count(df = int_dat, var = "intervention_6_amount")
missing_count <- function(df, var){
var_quo <- sym(var)
df %>%
filter(is.na(!!var_quo))
}
missing_count(df = int_dat, var = "intervention_6_amount")
missing_count <- function(df, var){
var_quo <- sym(var)
n_total <- nrow(df)
n_missing <- df %>%
filter(is.na(!!var_quo)) %>%
nrow()
output <- tibble(
variable = var,
n_missing = n_missing,
percent_missing = n_missing/n_total
)
return(output)
}
missing_count(df = int_dat, var = "intervention_6_amount")
var_ls <- names(int_dat)
var_ls <- names(int_dat)
purrr::map_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count)
rep(list(int_dat), length(var_ls))
var_ls <- names(int_dat)
purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count)
var_ls <- names(int_dat)
purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count) %>%
mutate(across(where(is.numeric), ~round(.x, 2)))
var_ls <- names(int_dat)
purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count) %>%
mutate(across(where(is.numeric), ~round(.x, 3)))
# Check data missingness
missing_count <- function(df, var){
var_quo <- sym(var)
n_total <- nrow(df)
n_missing <- df %>%
filter(is.na(!!var_quo)) %>%
nrow()
output <- tibble(
variable = var,
n_missing = n_missing,
freq_missing = n_missing/n_total,
per_missing = freq_missing*100
)
return(output)
}
var_ls <- names(int_dat)
purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count) %>%
mutate(across(where(is.numeric), ~round(.x, 3)))
var_ls <- names(int_dat)
purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count) %>%
mutate(across(where(is.numeric), ~round(.x, 3))) %>%
arrange(desc(freq_missing))
missing_count <- purrr::map2_df(rep(list(int_dat), length(var_ls)), var_ls, missing_count) %>%
mutate(across(where(is.numeric), ~round(.x, 3))) %>%
arrange(desc(freq_missing))
missing_count
library(ggplot2)
install.packages("ggplot2")
int_dat %>%
select(matches("type")) %>% names()
head(int_dat)
library(tidyr)
int_dat %>%
select(id, matches("type")) %>%
pivot_longer(matches("type"), names_to = "intervention")
int_type <- int_dat %>%
select(id, matches("type")) %>%
pivot_longer(matches("type"), names_to = "intervention") %>%
filter(!is.na(value))
int_type %>% head()
int_type <- int_dat %>%
select(id, matches("type")) %>%
pivot_longer(matches("type"), names_to = "intervention") %>%
filter(!is.na(value)) %>%
mutate(value = clean_characters(value))
int_type %>%
count(value)
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar()
library(ggplot2)
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar()
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity")
rlang::last_trace()
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 30, vjust = 0, hjust = 0))
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 30, vjust = 0.5, hjust = 0))
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 30, vjust = 0, hjust = 0.5))
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 30, vjust = 1, hjust = 1))
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1))
missing_count %>%
ggplot(aes(variable, freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1)) +
ylab("Frequency of missing data")
install.packages("scales")
missing_count %>%
ggplot(aes(reorder(variable, -freq_missing), freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1)) +
ylab("Frequency of missing data") +
scale_y_continuous(labels = scales::percent)
missing_count %>%
ggplot(aes(reorder(variable, -freq_missing), freq_missing)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1)) +
ylab("Frequency of missing data") +
xlab("Variable") +
scale_y_continuous(labels = scales::percent)
=======
>>>>>>> origin/creating_pipeline
source("R/helpers.R")
source("R/helpers.R")
# Read in data
m_path <- Sys.getenv("MKUSHEL_SHARED")
full_dat <- readxl::read_excel(paste(m_path, "/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx", sep = ""),
sheet = "Full Dataset")
full_dat <- full_dat %>%
janitor::clean_names()
# Read in data
m_path <- Sys.getenv("MKUSHEL_SHARED")
full_dat <- readxl::read_excel(paste(m_path, "/Home Safe Eval 23_25/June 2023 Exploratory Data/7.12.23.Home Safe Data-FY 22-23 Q3.xlsx", sep = ""),
sheet = "Full Dataset")
source("R/helpers.R")
source("R/helpers.R")
>>>>>>> origin/data_processing
